javascript:(function%20()%20%7B%20class%20Cell%20%7B%20constructor(row,%20col,%20board)%20%7B%20this.row%20=%20row;%20this.col%20=%20col;%20this.bomb%20=%20false;%20this.board%20=%20board;%20this.revealed%20=%20false;%20this.flagged%20=%20false;%20this.adjBombs%20=%200;%20%7D%20getAdjCells()%20%7B%20var%20cells%20=%20%5B%5D;%20var%20lastRow%20=%20this.board.length%20-%201;%20var%20lastCol%20=%20this.board%5B0%5D.length%20-%201;%20if%20(this.row%20%3E%200%20&&%20this.col%20%3E%200)%20cells.push(this.board%5Bthis.row%20-%201%5D%5Bthis.col%20-%201%5D);%20if%20(this.row%20%3E%200)%20cells.push(this.board%5Bthis.row%20-%201%5D%5Bthis.col%5D);%20if%20(this.row%20%3E%200%20&&%20this.col%20%3C%20lastCol)%20cells.push(this.board%5Bthis.row%20-%201%5D%5Bthis.col%20+%201%5D);%20if%20(this.col%20%3C%20lastCol)%20cells.push(this.board%5Bthis.row%5D%5Bthis.col%20+%201%5D);%20if%20(this.row%20%3C%20lastRow%20&&%20this.col%20%3C%20lastCol)%20cells.push(this.board%5Bthis.row%20+%201%5D%5Bthis.col%20+%201%5D);%20if%20(this.row%20%3C%20lastRow)%20cells.push(this.board%5Bthis.row%20+%201%5D%5Bthis.col%5D);%20if%20(this.row%20%3C%20lastRow%20&&%20this.col%20%3E%200)%20cells.push(this.board%5Bthis.row%20+%201%5D%5Bthis.col%20-%201%5D);%20if%20(this.col%20%3E%200)%20cells.push(this.board%5Bthis.row%5D%5Bthis.col%20-%201%5D);%20return%20cells;%20%7D%20calcAdjBombs()%20%7B%20var%20adjCells%20=%20this.getAdjCells();%20this.adjBombs%20=%20adjCells.reduce((count,%20cell)%20=%3E%20count%20+%20(cell.bomb%20?%201%20:%200),%200);%20%7D%20flag()%20%7B%20if%20(!this.revealed)%20%7B%20this.flagged%20=%20!this.flagged;%20return%20this.flagged;%20%7D%20return%20false;%20%7D%20reveal()%20%7B%20if%20(this.revealed)%20return%20false;%20this.revealed%20=%20true;%20if%20(this.bomb)%20return%20true;%20if%20(this.adjBombs%20===%200)%20%7B%20this.getAdjCells().forEach(cell%20=%3E%20%7B%20if%20(!cell.revealed)%20cell.reveal();%20%7D);%20%7D%20return%20false;%20%7D%20%7D%20var%20levels%20=%20%7B%20easy:%20%7B%20size:%209,%20bombs:%2010%20%7D,%20mid:%20%7B%20size:%2016,%20bombs:%2040%20%7D,%20hard:%20%7B%20size:%2030,%20bombs:%20160%20%7D%20%7D;%20var%20currentLevel%20=%20levels.mid;%20var%20boardSize%20=%20currentLevel.size;%20var%20timerId,%20hitBomb,%20board,%20timer,%20bombCounter;%20var%20createBoard%20=%20()%20=%3E%20%7B%20var%20table%20=%20document.createElement(%27table%27);%20table.id%20=%20%27board%27;%20table.style.borderCollapse%20=%20%27collapse%27;%20table.style.margin%20=%20%27auto%27;%20table.style.position%20=%20%27fixed%27;%20table.style.top%20=%20%2750%25%27;%20table.style.left%20=%20%2750%25%27;%20table.style.transform%20=%20%27translate(-50%25,%20-50%25)%27;%20table.style.backgroundColor%20=%20%27%23333';%20table.style.padding%20=%20'10px';%20table.style.border%20=%20'2px%20solid%20%23666';%20table.style.zIndex%20=%20'10000';%20document.body.appendChild(table);%20return%20table;%20%7D;%20var%20initGame%20=%20(level)%20=%3E%20%7B%20currentLevel%20=%20levels%5Blevel%5D%20%7C%7C%20currentLevel;%20boardSize%20=%20currentLevel.size;%20clearInterval(timerId);%20board.innerHTML%20=%20'';%20var%20header%20=%20document.createElement('tr');%20var%20headerCell%20=%20document.createElement('td');%20headerCell.colSpan%20=%20boardSize;%20headerCell.style.textAlign%20=%20'center';%20headerCell.style.background%20=%20'%23ccc';%20headerCell.style.color%20=%20'%23000';%20var%20statusBar%20=%20document.createElement('div');%20statusBar.id%20=%20'status-bar';%20bombCounter%20=%20document.createElement('span');%20bombCounter.id%20=%20'bomb-counter';%20bombCounter.textContent%20=%20currentLevel.bombs.toString().padStart(3,%20'0');%20timer%20=%20document.createElement('span');%20timer.id%20=%20'timer';%20timer.textContent%20=%20'000';%20var%20resetButton%20=%20document.createElement('button');%20resetButton.id%20=%20'reset';%20resetButton.textContent%20=%20'üòê';%20statusBar.appendChild(bombCounter);%20statusBar.appendChild(timer);%20statusBar.appendChild(resetButton);%20headerCell.appendChild(statusBar);%20header.appendChild(headerCell);%20board.appendChild(header);%20for%20(var%20i%20=%200;%20i%20%3C%20boardSize;%20i++)%20%7B%20var%20row%20=%20document.createElement('tr');%20for%20(var%20j%20=%200;%20j%20%3C%20boardSize;%20j++)%20%7B%20var%20cell%20=%20document.createElement('td');%20cell.classList.add('game-cell');%20cell.style.width%20=%20'20px';%20cell.style.height%20=%20'20px';%20cell.style.border%20=%20'1px%20solid%20%23000';%20cell.style.background%20=%20'%23aaa';%20cell.setAttribute('data-row',%20i);%20cell.setAttribute('data-col',%20j);%20row.appendChild(cell);%20%7D%20board.appendChild(row);%20%7D%20setupBoard();%20addEventListeners();%20startTimer();%20%7D;%20var%20setupBoard%20=%20()%20=%3E%20%7B%20boardArray%20=%20Array(boardSize).fill(null).map(()%20=%3E%20Array(boardSize).fill(null));%20for%20(var%20i%20=%200;%20i%20%3C%20boardSize;%20i++)%20%7B%20for%20(var%20j%20=%200;%20j%20%3C%20boardSize;%20j++)%20%7B%20boardArray%5Bi%5D%5Bj%5D%20=%20new%20Cell(i,%20j,%20boardArray);%20%7D%20%7D%20var%20bombsToPlace%20=%20currentLevel.bombs;%20while%20(bombsToPlace%20%3E%200)%20%7B%20var%20row%20=%20Math.floor(Math.random()%20*%20boardSize);%20var%20col%20=%20Math.floor(Math.random()%20*%20boardSize);%20if%20(!boardArray%5Brow%5D%5Bcol%5D.bomb)%20%7B%20boardArray%5Brow%5D%5Bcol%5D.bomb%20=%20true;%20bombsToPlace--;%20%7D%20%7D%20boardArray.forEach(row%20=%3E%20row.forEach(cell%20=%3E%20cell.calcAdjBombs()));%20%7D;%20var%20addEventListeners%20=%20()%20=%3E%20%7B%20board.addEventListener('click',%20handleCellClick);%20board.addEventListener('contextmenu',%20handleCellRightClick);%20document.getElementById('reset').addEventListener('click',%20resetGame);%20document.addEventListener('keydown',%20handleKeyPress);%20%7D;%20var%20handleCellClick%20=%20(event)%20=%3E%20%7B%20var%20target%20=%20event.target;%20if%20(target.tagName%20===%20'TD'%20&&%20!hitBomb)%20%7B%20var%20row%20=%20parseInt(target.getAttribute('data-row'));%20var%20col%20=%20parseInt(target.getAttribute('data-col'));%20hitBomb%20=%20boardArray%5Brow%5D%5Bcol%5D.reveal();%20if%20(hitBomb)%20%7B%20document.getElementById('reset').textContent%20=%20'üòû';%20%7D%20else%20if%20(checkWin())%20%7B%20document.getElementById('reset').textContent%20=%20'üòÅ';%20%7D%20updateBoard();%20%7D%20%7D;%20var%20handleCellRightClick%20=%20(event)%20=%3E%20%7B%20event.preventDefault();%20var%20target%20=%20event.target;%20if%20(target.tagName%20===%20'TD')%20%7B%20var%20row%20=%20parseInt(target.getAttribute('data-row'));%20var%20col%20=%20parseInt(target.getAttribute('data-col'));%20boardArray%5Brow%5D%5Bcol%5D.flag();%20updateBoard();%20%7D%20%7D;%20var%20handleKeyPress%20=%20(event)%20=%3E%20%7B%20if%20(event.key%20===%20'1')%20%7B%20initGame('easy');%20%7D%20else%20if%20(event.key%20===%20'2')%20%7B%20initGame('mid');%20%7D%20else%20if%20(event.key%20===%20'3')%20%7B%20initGame('hard');%20%7D%20else%20if%20(event.key%20===%20'/')%20%7B%20toggleBoardVisibility();%20%7D%20%7D;%20var%20toggleBoardVisibility%20=%20()%20=%3E%20%7B%20var%20boardElement%20=%20document.getElementById('board');%20if%20(boardElement.style.display%20===%20'none')%20%7B%20boardElement.style.display%20=%20'';%20%7D%20else%20%7B%20boardElement.style.display%20=%20'none';%20%7D%20%7D;%20var%20updateBoard%20=%20()%20=%3E%20%7B%20var%20colors%20=%20%5B%22%230000FA%22,%20%22%234B802D%22,%20%22%23DB1300%22,%20%22%23202081%22,%20%22%23690400%22,%20%22%23457A7A%22,%20%22%231B1B1B%22,%20%22%237A7A7A%22%5D;%20Array.from(document.querySelectorAll('td.game-cell')).forEach(cell%20=%3E%20%7B%20var%20row%20=%20parseInt(cell.getAttribute('data-row'));%20var%20col%20=%20parseInt(cell.getAttribute('data-col'));%20var%20boardCell%20=%20boardArray%5Brow%5D%5Bcol%5D;%20if%20(boardCell.revealed)%20%7B%20cell.style.background%20=%20'%23ddd';%20if%20(boardCell.bomb)%20%7B%20cell.style.background%20=%20'red';%20%7D%20else%20if%20(boardCell.adjBombs%20%3E%200)%20%7B%20cell.textContent%20=%20boardCell.adjBombs;%20cell.style.color%20=%20colors%5BboardCell.adjBombs%20-%201%5D;%20%7D%20%7D%20else%20if%20(boardCell.flagged)%20%7B%20cell.textContent%20=%20'üö©';%20%7D%20else%20%7B%20cell.textContent%20=%20'';%20%7D%20%7D);%20%7D;%20var%20resetGame%20=%20()%20=%3E%20%7B%20clearInterval(timerId);%20timerId%20=%20null;%20hitBomb%20=%20false;%20document.getElementById('reset').textContent%20=%20'üòê';%20initGame(currentLevel);%20%7D;%20var%20startTimer%20=%20()%20=%3E%20%7B%20var%20time%20=%200;%20timerId%20=%20setInterval(()%20=%3E%20%7B%20time%20+=%201;%20timer.textContent%20=%20time.toString().padStart(3,%20'0');%20%7D,%201000);%20%7D;%20var%20checkWin%20=%20()%20=%3E%20%7B%20return%20boardArray.every(row%20=%3E%20row.every(cell%20=%3E%20(cell.bomb%20&&%20!cell.revealed)%20%7C%7C%20(!cell.bomb%20&&%20cell.revealed)));%20%7D;%20var%20board%20=%20document.getElementById('board')%20%7C%7C%20createBoard();%20initGame('mid');%20%7D)();
